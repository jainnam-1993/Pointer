# Inquiry Session Flow - Start and interact with guided inquiry
# Run: maestro test maestro/flows/08_inquiry_session.yaml
#
# Tests: Inquiry selection, session start, phase transitions

appId: com.dailypointer
---
- print: "→ Launching app"
- launchApp
- print: "  ⏳ Waiting for animations"
- waitForAnimationToEnd
- print: "  ✓ App launched"

# Skip onboarding if shown
- print: "→ Skipping onboarding (if shown)"
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Maybe Later"
    optional: true

# Navigate to Inquiry tab
- print: "→ Inquiry tab"
- tapOn:
    text: ".*Inquiry.*"
- print: "  ✓ Inquiry list loaded"
- takeScreenshot: "inquiry_01_list"

# Tap on first inquiry session (Who Am I? - free for all users)
- print: "→ Starting 'Who Am I?' session"
- tapOn:
    text: ".*Who Am I.*"
- print: "  ✓ Session started"
- takeScreenshot: "inquiry_02_session_start"

# Wait for session to progress (Setup phase is 3 seconds)
# TODO: User decision - how long should we wait to capture the question phase?
- print: "→ Interacting with session"
- swipe:
    direction: UP
    duration: 100
- print: "  ✓ Session interaction complete"
- takeScreenshot: "inquiry_03_in_progress"

# Exit session (back or tap)
- print: "→ Exiting session"
- tapOn:
    text: ".*back.*"
    optional: true
- tapOn:
    text: ".*close.*"
    optional: true
- tapOn:
    text: ".*Inquiry.*"
    optional: true
- print: "  ✓ Session exited"

- takeScreenshot: "inquiry_04_complete"
- print: "  ✓ Inquiry flow complete"
