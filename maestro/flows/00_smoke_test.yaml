# Smoke Test - Quick health check for both platforms
# Run: maestro test maestro/flows/00_smoke_test.yaml
#
# Verifies: App launches, bottom nav works, core screens load
# Duration: ~30 seconds

appId: com.dailypointer
---
- print: "→ Launching app"
- launchApp
- print: "  ✓ App launched"

# Skip onboarding if shown (actual button labels from onboarding_screen.dart)
- print: "→ Skipping onboarding (if shown)"
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
# Final onboarding page: notification permission
- tapOn:
    text: "Maybe Later"
    optional: true
- tapOn:
    text: "Enable Notifications"
    optional: true

# Navigate through all tabs (accessibility labels include newlines, use regex)
- print: "→ Library tab"
- tapOn:
    text: ".*Library.*"
- print: "  ✓ Library loaded"

- print: "→ Inquiry tab"
- tapOn:
    text: ".*Inquiry.*"
- print: "  ✓ Inquiry loaded"

- print: "→ Settings tab"
- tapOn:
    text: ".*Settings.*"
- print: "  ✓ Settings loaded"

- print: "→ Home tab"
- tapOn:
    text: ".*Home.*"
- print: "  ✓ Home loaded"

# Verify we can interact with home screen
- print: "→ Testing next pointing button"
- tapOn:
    text: ".*next pointing.*"
    optional: true
- print: "  ✓ Interaction complete"

- print: "→ Capturing final screenshot"
- takeScreenshot: smoke_test_complete
- print: "  ✓ Smoke test complete"
