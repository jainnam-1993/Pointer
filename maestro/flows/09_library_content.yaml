# Library Content Flow - Browse and open articles/teachings
# Run: maestro test maestro/flows/09_library_content.yaml
#
# Tests: Library navigation, article opening, content display

appId: com.dailypointer
---
- print: "→ Launching app"
- launchApp
- print: "  ⏳ Waiting for animations"
- waitForAnimationToEnd
- print: "  ✓ App launched"

# Skip onboarding if shown
- print: "→ Skipping onboarding (if shown)"
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Maybe Later"
    optional: true

# Navigate to Library tab
- print: "→ Library tab"
- tapOn:
    text: ".*Library.*"
- print: "  ✓ Library loaded"
- takeScreenshot: "library_01_browse"

# Scroll to see more content
- print: "→ Scrolling library content"
- swipe:
    direction: UP
    duration: 300
- print: "  ✓ Library scrolled"
- takeScreenshot: "library_02_scrolled"

# Tap on first available article (matches "minute read" pattern)
- print: "→ Opening article"
- tapOn:
    text: ".*minute read.*"
    optional: true
- print: "  ✓ Article opened (if found)"
- takeScreenshot: "library_03_article_open"

# Scroll within article
- print: "→ Scrolling article content"
- swipe:
    direction: UP
    duration: 300
- print: "  ✓ Article scrolled"
- takeScreenshot: "library_04_article_content"

# Go back to library
- print: "→ Returning to Library"
- tapOn:
    text: ".*Library.*"
    optional: true
- tapOn:
    text: ".*back.*"
    optional: true

# Try teachings section if visible
- print: "→ Checking Teachings section"
- tapOn:
    text: ".*Teachings.*"
    optional: true
- print: "  ✓ Teachings checked"
- takeScreenshot: "library_05_teachings"

# Tap on a teaching
- print: "→ Opening teaching detail"
- tapOn:
    text: ".*tradition.*"
    optional: true
- print: "  ✓ Teaching opened (if found)"
- takeScreenshot: "library_06_teaching_detail"

# Return to home
- print: "→ Returning to Home"
- tapOn:
    text: ".*Home.*"
- takeScreenshot: "library_07_complete"
- print: "  ✓ Library flow complete"
